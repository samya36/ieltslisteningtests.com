<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Listening Test 3 - Complete Practice Test</title>
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' https://cdnjs.cloudflare.com;
        style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com;
        img-src 'self' data: blob:;
        audio-src 'self' https://cdn.jsdelivr.net data: blob:;
        connect-src 'self' https://cdn.jsdelivr.net;
        object-src 'none';
        base-uri 'self';
        frame-ancestors 'none';
        upgrade-insecure-requests;
    ">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Complete IELTS Listening Test 3 with audio, questions, and enhanced features. Practice with real test format and get instant feedback.">
    <meta name="keywords" content="IELTS, listening test, practice, English test, audio">
    <meta name="author" content="IELTS Listening Tests">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="IELTS Listening Test 3 - Complete Practice">
    <meta property="og:description" content="Practice IELTS Listening Test 3 with enhanced audio player and smart answer tracking">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ieltslisteningtests.com/pages/test3.html">
    
    <!-- Enhanced Styles -->
    <link rel="stylesheet" href="../css/enhanced-components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Original Styles -->
    <link rel="stylesheet" href="../css/styles.css">
    
    <!-- Answers for scoring -->
    <script src="../js/test3-answers.js" defer></script>
    
    <!-- PWA -->
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#e53935">
    
    <style>
        .test-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        .main-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .test-sidebar {
            position: sticky;
            top: 1rem;
            height: fit-content;
        }
        
        .enhanced-audio-player {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px 12px 0 0;
        }
        
        .section-content {
            padding: 2rem;
        }
        
        .section-nav {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .section-nav button {
            flex: 1;
            padding: 1rem;
            border: none;
            background: transparent;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .section-nav button.active {
            background: white;
            color: #e53935;
            border-bottom: 3px solid #e53935;
        }
        
        .section-nav button:hover:not(.active) {
            background: #e9ecef;
        }
        
        .question-block {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: #fafafa;
        }
        
        .question {
            margin-bottom: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #e53935;
        }
        
        .question-number {
            font-weight: bold;
            color: #e53935;
            margin-right: 0.5rem;
        }
        
        .options {
            margin-top: 0.5rem;
        }
        
        .option {
            margin: 0.5rem 0;
            padding: 0.5rem;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }
        
        .option:hover {
            background-color: #f8f9fa;
        }
        
        .option input[type="radio"] {
            margin-right: 0.5rem;
        }
        
        .form-content {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }
        
        .form-content h3 {
            text-align: center;
            color: #495057;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .form-item {
            margin: 0.8rem 0;
            display: flex;
            align-items: center;
        }
        
        .form-item.bullet {
            margin-left: 1rem;
        }
        
        .form-item input[type="text"] {
            border: none;
            border-bottom: 2px solid #e53935;
            background: transparent;
            padding: 0.25rem;
            margin: 0 0.25rem;
            min-width: 120px;
            font-weight: bold;
        }
        
        .table-content {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            overflow-x: auto;
        }
        
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        .schedule-table th,
        .schedule-table td {
            border: 1px solid #dee2e6;
            padding: 0.8rem;
            text-align: left;
        }
        
        .schedule-table th {
            background-color: #f8f9fa;
            font-weight: bold;
            color: #495057;
        }
        
        .schedule-table input[type="text"] {
            border: none;
            border-bottom: 2px solid #e53935;
            background: transparent;
            padding: 0.25rem;
            width: 100%;
            font-weight: bold;
        }
        
        .summary-content {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 2px solid #dee2e6;
            line-height: 1.8;
        }
        
        .summary-content h4 {
            text-align: center;
            margin-bottom: 1rem;
            color: #495057;
        }
        
        .summary-content input[type="text"] {
            border: none;
            border-bottom: 2px solid #e53935;
            background: transparent;
            padding: 0.25rem;
            margin: 0 0.25rem;
            min-width: 100px;
            font-weight: bold;
        }
        
        .box-content {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1rem 0;
            border: 2px solid #dee2e6;
        }
        
        .box-content h4 {
            text-align: center;
            margin-bottom: 1rem;
            color: #495057;
        }
        
        .notes-section {
            line-height: 1.8;
        }
        
        .notes-section .header {
            font-weight: bold;
            color: #e53935;
            margin: 1rem 0 0.5rem 0;
            font-size: 1.1rem;
        }
        
        .notes-section .subheader {
            font-weight: bold;
            margin: 0.8rem 0 0.3rem 0;
            color: #495057;
        }
        
        .notes-section .text {
            margin: 0.3rem 0;
        }
        
        .notes-section input[type="text"] {
            border: none;
            border-bottom: 2px solid #e53935;
            background: transparent;
            padding: 0.25rem;
            margin: 0 0.25rem;
            min-width: 100px;
            font-weight: bold;
        }
        
        @media (max-width: 1024px) {
            .test-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .test-sidebar {
                position: static;
            }
        }
        
        @media (max-width: 768px) {
            .test-container {
                padding: 0.5rem;
            }
            
            .section-content {
                padding: 1rem;
            }
            
            .enhanced-audio-player {
                padding: 1rem;
            }
            
            .schedule-table {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <main class="main-content">
            <!-- Enhanced Audio Player -->
            <div class="enhanced-audio-player">
                <div class="audio-section">
                    <h2 style="margin: 0 0 1rem 0; display: flex; align-items: center;">
                        <i class="fas fa-headphones" style="margin-right: 0.5rem;"></i>
                        IELTS Listening Test 3
                    </h2>
                    
                    <!-- Section Audio Players -->
                    <div class="audio-players">
                        <div class="audio-player-section" data-section="1">
                            <audio id="section1-player" preload="metadata"
                                   src="https://cdn.jsdelivr.net/gh/xjy-git/audio@main/test3/section1.mp3"
                                   data-local-src="../audio/test3/section1.mp3">
                            </audio>
                        </div>
                        <div class="audio-player-section" data-section="2">
                            <audio id="section2-player" preload="metadata"
                                   src="https://cdn.jsdelivr.net/gh/xjy-git/audio@main/test3/section2.mp3"
                                   data-local-src="../audio/test3/section2.mp3">
                            </audio>
                        </div>
                        <div class="audio-player-section" data-section="3">
                            <audio id="section3-player" preload="metadata"
                                   src="https://cdn.jsdelivr.net/gh/xjy-git/audio@main/test3/section3.mp3"
                                   data-local-src="../audio/test3/section3.mp3">
                            </audio>
                        </div>
                        <div class="audio-player-section" data-section="4">
                            <audio id="section4-player" preload="metadata"
                                   src="https://cdn.jsdelivr.net/gh/xjy-git/audio@main/test3/section4.mp3"
                                   data-local-src="../audio/test3/section4.mp3">
                            </audio>
                        </div>
                    </div>
                    
                    <!-- Audio Controls -->
                    <div class="audio-controls" id="audio-controls">
                        <!-- Controls will be dynamically generated -->
                    </div>
                    
                    <!-- Breakpoint Controls -->
                    <div class="breakpoint-controls" id="breakpoint-controls">
                        <!-- Breakpoints will be dynamically generated -->
                    </div>
                </div>
            </div>
            
            <!-- Section Navigation -->
            <div class="section-nav">
                <button class="section-btn active" data-section="1">
                    <i class="fas fa-play-circle"></i> Section 1 (Q1-10)
                </button>
                <button class="section-btn" data-section="2">
                    <i class="fas fa-play-circle"></i> Section 2 (Q11-20)
                </button>
                <button class="section-btn" data-section="3">
                    <i class="fas fa-play-circle"></i> Section 3 (Q21-30)
                </button>
                <button class="section-btn" data-section="4">
                    <i class="fas fa-play-circle"></i> Section 4 (Q31-40)
                </button>
            </div>
            
            <!-- Test Content -->
            <div class="section-content">

                <!-- Section 1 -->
                <div class="test-section active" data-section="1">
                    <h3>Section 1</h3>
                    <div class="question-block">
                        <h4><strong>Questions 1-10</strong></h4>
                        <p><strong>Complete the form below.</strong></p>
                        <p><em>Write <strong>NO MORE THAN THREE WORDS AND/OR A NUMBER</strong> for each answer.</em></p>
                        
                        <div class="form-content">
                            <h3>KIWI AIR - CUSTOMER COMPLAINT FORM</h3>
                            <div class="form-item">
                                Passenger name: Ms Sarah <input type="text" id="q1" name="q1" placeholder="1"> .......................
                            </div>
                            <div class="form-item">
                                Flight number: KA <input type="text" id="q2" name="q2" placeholder="2"> .......................
                            </div>
                            <div class="form-item">
                                Date of flight: <input type="text" id="q3" name="q3" placeholder="3"> ....................... March
                            </div>
                            <div class="form-item">
                                Destination: <input type="text" id="q4" name="q4" placeholder="4"> .......................
                            </div>
                            <div class="form-item">
                                Type of complaint: <input type="text" id="q5" name="q5" placeholder="5"> ....................... delay
                            </div>
                            <div class="form-item">
                                Delay duration: <input type="text" id="q6" name="q6" placeholder="6"> ....................... hours
                            </div>
                            <div class="form-item">
                                Reason given by airline:
                            </div>
                            <div class="form-item bullet">
                                • <input type="text" id="q7" name="q7" placeholder="7"> ....................... conditions
                            </div>
                            <div class="form-item">
                                Compensation requested:
                            </div>
                            <div class="form-item bullet">
                                • <input type="text" id="q8" name="q8" placeholder="8"> ....................... for meals
                            </div>
                            <div class="form-item bullet">
                                • Voucher for <input type="text" id="q9" name="q9" placeholder="9"> ....................... flight
                            </div>
                            <div class="form-item">
                                Contact method: <input type="text" id="q10" name="q10" placeholder="10"> .......................
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Section 2 -->
                <div class="test-section" data-section="2">
                    <h3>Section 2</h3>
                    
                    <div class="question-block">
                        <h4><strong>Questions 11-16</strong></h4>
                        <p><strong>Complete the table below.</strong></p>
                        <p><em>Write <strong>NO MORE THAN TWO WORDS AND/OR A NUMBER</strong> for each answer.</em></p>
                        
                        <div class="table-content">
                            <h4>Spring Festival Events Schedule</h4>
                            <table class="schedule-table">
                                <thead>
                                    <tr>
                                        <th>Time</th>
                                        <th>Event</th>
                                        <th>Location</th>
                                        <th>Cost</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>10:00</td>
                                        <td><input type="text" id="q11" name="q11" placeholder="11"></td>
                                        <td>Main Stage</td>
                                        <td>Free</td>
                                    </tr>
                                    <tr>
                                        <td>12:30</td>
                                        <td>Cultural Exhibition</td>
                                        <td><input type="text" id="q12" name="q12" placeholder="12"></td>
                                        <td>$5</td>
                                    </tr>
                                    <tr>
                                        <td><input type="text" id="q13" name="q13" placeholder="13"></td>
                                        <td>Children's Workshop</td>
                                        <td>Arts Centre</td>
                                        <td>$10</td>
                                    </tr>
                                    <tr>
                                        <td>15:00</td>
                                        <td><input type="text" id="q14" name="q14" placeholder="14"></td>
                                        <td>Food Court</td>
                                        <td>Various</td>
                                    </tr>
                                    <tr>
                                        <td>18:00</td>
                                        <td>Evening Concert</td>
                                        <td><input type="text" id="q15" name="q15" placeholder="15"></td>
                                        <td>$<input type="text" id="q16" name="q16" placeholder="16" style="width: 60px;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="question-block">
                        <h4><strong>Questions 17-20</strong></h4>
                        <p><strong>Choose the correct letter, A, B or C.</strong></p>
                        
                        <div class="question">
                            <span class="question-number">17.</span>
                            The Spring Festival celebrates
                            <div class="options">
                                <div class="option">
                                    <input type="radio" id="q17a" name="q17" value="A">
                                    <label for="q17a">A. the beginning of spring season</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q17b" name="q17" value="B">
                                    <label for="q17b">B. Chinese New Year traditions</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q17c" name="q17" value="C">
                                    <label for="q17c">C. local community heritage</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question">
                            <span class="question-number">18.</span>
                            This year's festival is special because
                            <div class="options">
                                <div class="option">
                                    <input type="radio" id="q18a" name="q18" value="A">
                                    <label for="q18a">A. it's the 25th anniversary</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q18b" name="q18" value="B">
                                    <label for="q18b">B. there are international performers</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q18c" name="q18" value="C">
                                    <label for="q18c">C. it lasts for a longer period</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question">
                            <span class="question-number">19.</span>
                            Food stalls will mainly offer
                            <div class="options">
                                <div class="option">
                                    <input type="radio" id="q19a" name="q19" value="A">
                                    <label for="q19a">A. traditional Asian cuisine</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q19b" name="q19" value="B">
                                    <label for="q19b">B. fusion food options</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q19c" name="q19" value="C">
                                    <label for="q19c">C. local Australian dishes</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question">
                            <span class="question-number">20.</span>
                            Advanced booking is required for
                            <div class="options">
                                <div class="option">
                                    <input type="radio" id="q20a" name="q20" value="A">
                                    <label for="q20a">A. all events</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q20b" name="q20" value="B">
                                    <label for="q20b">B. workshop activities only</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q20c" name="q20" value="C">
                                    <label for="q20c">C. the evening concert only</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Section 3 -->
                <div class="test-section" data-section="3">
                    <h3>Section 3</h3>
                    
                    <div class="question-block">
                        <h4><strong>Questions 21-25</strong></h4>
                        <p><strong>Choose the correct letter, A, B or C.</strong></p>
                        
                        <div class="question">
                            <span class="question-number">21.</span>
                            The main purpose of the Iceland field trip is to study
                            <div class="options">
                                <div class="option">
                                    <input type="radio" id="q21a" name="q21" value="A">
                                    <label for="q21a">A. volcanic activity</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q21b" name="q21" value="B">
                                    <label for="q21b">B. glacial formations</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q21c" name="q21" value="C">
                                    <label for="q21c">C. geological structures</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question">
                            <span class="question-number">22.</span>
                            The field trip will last for
                            <div class="options">
                                <div class="option">
                                    <input type="radio" id="q22a" name="q22" value="A">
                                    <label for="q22a">A. one week</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q22b" name="q22" value="B">
                                    <label for="q22b">B. ten days</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q22c" name="q22" value="C">
                                    <label for="q22c">C. two weeks</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question">
                            <span class="question-number">23.</span>
                            Students need to bring
                            <div class="options">
                                <div class="option">
                                    <input type="radio" id="q23a" name="q23" value="A">
                                    <label for="q23a">A. sleeping bags</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q23b" name="q23" value="B">
                                    <label for="q23b">B. cooking equipment</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q23c" name="q23" value="C">
                                    <label for="q23c">C. warm clothing</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question">
                            <span class="question-number">24.</span>
                            The most challenging aspect will be
                            <div class="options">
                                <div class="option">
                                    <input type="radio" id="q24a" name="q24" value="A">
                                    <label for="q24a">A. the weather conditions</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q24b" name="q24" value="B">
                                    <label for="q24b">B. the physical demands</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q24c" name="q24" value="C">
                                    <label for="q24c">C. the technical requirements</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="question">
                            <span class="question-number">25.</span>
                            Safety briefings will cover
                            <div class="options">
                                <div class="option">
                                    <input type="radio" id="q25a" name="q25" value="A">
                                    <label for="q25a">A. emergency procedures only</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q25b" name="q25" value="B">
                                    <label for="q25b">B. equipment usage only</label>
                                </div>
                                <div class="option">
                                    <input type="radio" id="q25c" name="q25" value="C">
                                    <label for="q25c">C. both emergency and equipment procedures</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="question-block">
                        <h4><strong>Questions 26-30</strong></h4>
                        <p><strong>Complete the summary below.</strong></p>
                        <p><em>Write <strong>NO MORE THAN TWO WORDS</strong> for each answer.</em></p>
                        
                        <div class="summary-content">
                            <h4>Iceland Field Trip Itinerary</h4>
                            <p>Day 1-2: Arrival and <input type="text" id="q26" name="q26" placeholder="26"> ....................... in Reykjavik. Visit to the National Museum and geology department briefing.</p>
                            
                            <p>Day 3-5: Travel to the <input type="text" id="q27" name="q27" placeholder="27"> ....................... region to study recent volcanic formations and collect rock samples.</p>
                            
                            <p>Day 6-8: Examination of <input type="text" id="q28" name="q28" placeholder="28"> ....................... near Vatnajökull glacier and analysis of ice-carved landscapes.</p>
                            
                            <p>Day 9-10: Return to Reykjavik for <input type="text" id="q29" name="q29" placeholder="29"> ....................... work and preparation of field reports.</p>
                            
                            <p>All students must submit their <input type="text" id="q30" name="q30" placeholder="30"> ....................... within two weeks of return.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Section 4 -->
                <div class="test-section" data-section="4">
                    <h3>Section 4</h3>
                    <div class="question-block">
                        <h4><strong>Questions 31-40</strong></h4>
                        <p><strong>Complete the notes below.</strong></p>
                        <p><em>Write <strong>NO MORE THAN TWO WORDS</strong> for each answer.</em></p>
                        
                        <div class="box-content">
                            <h4>Recycling Tyres in Australia</h4>
                            <div class="notes-section">
                                <div class="header">Current Situation</div>
                                <div class="text">• Australia produces <input type="text" id="q31" name="q31" placeholder="31"> ....................... million waste tyres annually</div>
                                <div class="text">• Previously, most tyres were <input type="text" id="q32" name="q32" placeholder="32"> ....................... overseas</div>
                                <div class="text">• New regulations require <input type="text" id="q33" name="q33" placeholder="33"> ....................... processing</div>
                                
                                <div class="header">Recycling Methods</div>
                                <div class="text">• <input type="text" id="q34" name="q34" placeholder="34"> ....................... recycling: tyres are shredded into small pieces</div>
                                <div class="text">• Used for playground surfaces and <input type="text" id="q35" name="q35" placeholder="35"> .......................</div>
                                <div class="text">• <input type="text" id="q36" name="q36" placeholder="36"> ....................... recycling: tyres burned for energy production</div>
                                
                                <div class="header">New Applications</div>
                                <div class="text">• Road construction: crumb rubber improves <input type="text" id="q37" name="q37" placeholder="37"> .......................</div>
                                <div class="text">• Building materials: rubber mixed with <input type="text" id="q38" name="q38" placeholder="38"> .......................</div>
                                <div class="text">• Agricultural uses: <input type="text" id="q39" name="q39" placeholder="39"> ....................... for livestock areas</div>
                                
                                <div class="header">Future Challenges</div>
                                <div class="text">• Need for increased <input type="text" id="q40" name="q40" placeholder="40"> ....................... investment</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Enhanced Answer Sheet Sidebar -->
        <aside class="test-sidebar">
            <div class="answer-sheet-container" id="answer-sheet-container">
                <!-- Enhanced Answer Sheet will be dynamically generated here -->
            </div>
        </aside>
    </div>
    
    <!-- Submit Actions -->
    <div class="submit-container" style="max-width: 1200px; margin: 16px auto; text-align: right;">
      <button class="submit-btn" data-action="submit-test" style="padding: 10px 16px; background:#e53935; color:#fff; border:none; border-radius:6px; cursor:pointer;">
        提交测试
      </button>
    </div>
    
    <!-- Test Data -->
    <script src="../js/test-data-3.js" defer></script>
    
    <!-- Enhanced Components -->
    <script src="../js/enhanced-audio-player.js" defer></script>
    <script src="../js/enhanced-answer-sheet.js" defer></script>
    <script src="../js/enhanced-keyboard-navigation.js" defer></script>
    
    <!-- Test Initialization -->
    <script src="../js/test3-init.js" defer></script>
    <script src="../js/score-engine.js" defer></script>
    <script src="../js/test-page-events.js" defer></script>
</body>
</html>

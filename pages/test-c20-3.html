<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdnjs.cloudflare.com;
        style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com;
        font-src 'self' https://cdnjs.cloudflare.com data:;
        img-src 'self' data: blob:;
        audio-src 'self' data: blob:;
        connect-src 'self';
        object-src 'none';
        base-uri 'self';
        form-action 'self';
        frame-ancestors 'none';
        upgrade-insecure-requests;
    ">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    
    <title>Cambridge IELTS 20 Test 3 - IELTSå¬åŠ›è¯„åˆ†è§£æ</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/test.css">
    <link rel="stylesheet" href="../css/accessibility.css">
    <link rel="stylesheet" href="../css/mobile-optimizations.css">
    <link rel="stylesheet" href="../css/visual-feedback.css">
    <link rel="stylesheet" href="../css/mobile-performance-optimizations.css">
    <link rel="stylesheet" href="../css/cambridge-tests.css">
</head>
<body>
    <a href="#main-content" class="skip-link">è·³è¿‡å¯¼èˆªï¼Œç›´æ¥åˆ°ä¸»è¦å†…å®¹</a>
    <nav class="nav-bar">
        <div class="nav-container">
            <div class="logo">
                <a href="../index.html" class="home-link">
                    <img src="../images/logo.png" alt="IELTSå¬åŠ›è¯„åˆ†è§£æ" class="logo-img">
                    IELTSå¬åŠ›è¯„åˆ†è§£æ
                </a>
            </div>
            <button class="nav-toggle" aria-label="åˆ‡æ¢å¯¼èˆªèœå•" aria-expanded="false">
                <i class="fas fa-bars"></i>
            </button>
            <ul class="nav-menu">
                <li><a href="../index.html">é¦–é¡µ</a></li>
                <li><a href="scoring.html">è¯„åˆ†è¯¦è§£</a></li>
                <li><a href="cases.html">æ¡ˆä¾‹åˆ†æ</a></li>
                <li><a href="practice.html">å¬åŠ›ç»ƒä¹ </a></li>
            </ul>
        </div>
    </nav>

    <main class="test-container" id="main-content">
        <div class="test-intro cambridge-test-intro">
            <h2>Cambridge IELTS 20 Test 3</h2>
            <div class="cambridge-badge"><span class="cambridge-logo">ğŸ“œ</span>å®˜æ–¹è®¤è¯æµ‹è¯•</div>
            <ul class="test-instructions">
                <li>æ—¶é•¿ï¼š30åˆ†é’Ÿ</li>
                <li>é¢˜é‡ï¼š40é¢˜</li>
                <li>éš¾åº¦ï¼šå®˜æ–¹æ ‡å‡†</li>
                <li>æ¯ä¸ªéƒ¨åˆ†æœ‰ç‹¬ç«‹çš„éŸ³é¢‘æ’­æ”¾å™¨ï¼Œå¯è°ƒæ•´æ’­æ”¾é€Ÿåº¦</li>
                <li>åœ¨å¬åŠ›è¿‡ç¨‹ä¸­å®Œæˆç­”é¢˜</li>
            </ul>
        </div>

        <div class="section-tabs" role="tablist" aria-label="æµ‹è¯•éƒ¨åˆ†é€‰æ‹©">
            <button class="section-tab active" data-section="1" role="tab" aria-selected="true" aria-controls="section1-content" id="section1-tab" tabindex="0">Section 1</button>
            <button class="section-tab" data-section="2" role="tab" aria-selected="false" aria-controls="section2-content" id="section2-tab" tabindex="-1">Section 2</button>
            <button class="section-tab" data-section="3" role="tab" aria-selected="false" aria-controls="section3-content" id="section3-tab" tabindex="-1">Section 3</button>
            <button class="section-tab" data-section="4" role="tab" aria-selected="false" aria-controls="section4-content" id="section4-tab" tabindex="-1">Section 4</button>
        </div>

        <div class="audio-players-container">
            <div class="audio-player" id="section1-player-container">
                <audio id="section1-player" src="../å‰‘æ¡¥é›…æ€20/å‰‘20 å¬åŠ›éŸ³é¢‘Test3/Section1.mp3"></audio>
                <div class="custom-player">
                    <div class="player-main">
                        <button class="play-btn" id="section1-play" aria-label="æ’­æ”¾Section 1éŸ³é¢‘" aria-pressed="false" tabindex="0">
                            <i class="fas fa-play" aria-hidden="true"></i>
                        </button>
                        <div class="progress-bar">
                            <input type="range" class="progress" id="section1-progress" min="0" max="100" value="0" aria-label="éŸ³é¢‘æ’­æ”¾è¿›åº¦" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        </div>
                        <div class="time" id="section1-time">00:00 / 00:00</div>
                    </div>
                    <div class="speed-control">
                        <label for="section1-speed" class="visually-hidden">æ’­æ”¾é€Ÿåº¦é€‰æ‹©</label>
                        <select class="playback-speed" id="section1-speed" aria-label="æ’­æ”¾é€Ÿåº¦é€‰æ‹©">
                            <option value="0.5">0.5x</option>
                            <option value="0.75">0.75x</option>
                            <option value="1" selected>1.0x</option>
                            <option value="1.25">1.25x</option>
                            <option value="1.5">1.5x</option>
                            <option value="2">2.0x</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="audio-player" id="section2-player-container" style="display: none;">
                <audio id="section2-player" src="../å‰‘æ¡¥é›…æ€20/å‰‘20 å¬åŠ›éŸ³é¢‘Test3/Section2.mp3"></audio>
                <div class="custom-player">
                    <div class="player-main">
                        <button class="play-btn" id="section2-play" aria-label="æ’­æ”¾Section 2éŸ³é¢‘" aria-pressed="false" tabindex="0">
                            <i class="fas fa-play" aria-hidden="true"></i>
                        </button>
                        <div class="progress-bar">
                            <input type="range" class="progress" id="section2-progress" min="0" max="100" value="0" aria-label="éŸ³é¢‘æ’­æ”¾è¿›åº¦" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        </div>
                        <div class="time" id="section2-time">00:00 / 00:00</div>
                    </div>
                    <div class="speed-control">
                        <label for="section2-speed" class="visually-hidden">æ’­æ”¾é€Ÿåº¦é€‰æ‹©</label>
                        <select class="playback-speed" id="section2-speed" aria-label="æ’­æ”¾é€Ÿåº¦é€‰æ‹©">
                            <option value="0.5">0.5x</option>
                            <option value="0.75">0.75x</option>
                            <option value="1" selected>1.0x</option>
                            <option value="1.25">1.25x</option>
                            <option value="1.5">1.5x</option>
                            <option value="2">2.0x</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="audio-player" id="section3-player-container" style="display: none;">
                <audio id="section3-player" src="../å‰‘æ¡¥é›…æ€20/å‰‘20 å¬åŠ›éŸ³é¢‘Test3/Section3.mp3"></audio>
                <div class="custom-player">
                    <div class="player-main">
                        <button class="play-btn" id="section3-play" aria-label="æ’­æ”¾Section 3éŸ³é¢‘" aria-pressed="false" tabindex="0">
                            <i class="fas fa-play" aria-hidden="true"></i>
                        </button>
                        <div class="progress-bar">
                            <input type="range" class="progress" id="section3-progress" min="0" max="100" value="0" aria-label="éŸ³é¢‘æ’­æ”¾è¿›åº¦" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        </div>
                        <div class="time" id="section3-time">00:00 / 00:00</div>
                    </div>
                    <div class="speed-control">
                        <label for="section3-speed" class="visually-hidden">æ’­æ”¾é€Ÿåº¦é€‰æ‹©</label>
                        <select class="playback-speed" id="section3-speed" aria-label="æ’­æ”¾é€Ÿåº¦é€‰æ‹©">
                            <option value="0.5">0.5x</option>
                            <option value="0.75">0.75x</option>
                            <option value="1" selected>1.0x</option>
                            <option value="1.25">1.25x</option>
                            <option value="1.5">1.5x</option>
                            <option value="2">2.0x</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="audio-player" id="section4-player-container" style="display: none;">
                <audio id="section4-player" src="../å‰‘æ¡¥é›…æ€20/å‰‘20 å¬åŠ›éŸ³é¢‘Test3/Section4.mp3"></audio>
                <div class="custom-player">
                    <div class="player-main">
                        <button class="play-btn" id="section4-play" aria-label="æ’­æ”¾Section 4éŸ³é¢‘" aria-pressed="false" tabindex="0">
                            <i class="fas fa-play" aria-hidden="true"></i>
                        </button>
                        <div class="progress-bar">
                            <input type="range" class="progress" id="section4-progress" min="0" max="100" value="0" aria-label="éŸ³é¢‘æ’­æ”¾è¿›åº¦" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        </div>
                        <div class="time" id="section4-time">00:00 / 00:00</div>
                    </div>
                    <div class="speed-control">
                        <label for="section4-speed" class="visually-hidden">æ’­æ”¾é€Ÿåº¦é€‰æ‹©</label>
                        <select class="playback-speed" id="section4-speed" aria-label="æ’­æ”¾é€Ÿåº¦é€‰æ‹©">
                            <option value="0.5">0.5x</option>
                            <option value="0.75">0.75x</option>
                            <option value="1" selected>1.0x</option>
                            <option value="1.25">1.25x</option>
                            <option value="1.5">1.5x</option>
                            <option value="2">2.0x</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <form id="test-form">
            <div class="section-content active" id="section1-content" data-section="1" role="tabpanel" aria-labelledby="section1-tab">
                <div class="questions"></div>
            </div>
            <div class="section-content" id="section2-content" data-section="2" style="display: none;" role="tabpanel" aria-labelledby="section2-tab">
                <div class="questions"></div>
            </div>
            <div class="section-content" id="section3-content" data-section="3" style="display: none;" role="tabpanel" aria-labelledby="section3-tab">
                <div class="questions"></div>
            </div>
            <div class="section-content" id="section4-content" data-section="4" style="display: none;" role="tabpanel" aria-labelledby="section4-tab">
                <div class="questions"></div>
            </div>
        </form>
    </main>

    <div class="result-modal" id="result-modal">
        <div class="result-content">
            <span class="close-result" id="close-result">&times;</span>
            <div class="result-header">
                <h2>æµ‹è¯•ç»“æœ</h2>
                <div class="cambridge-badge"><span class="cambridge-logo">ğŸ“œ</span>Cambridge IELTS 20 Test 3</div>
                <p>æ‚¨å·²å®Œæˆå‰‘æ¡¥é›…æ€20å¬åŠ›æµ‹è¯•ï¼Œä»¥ä¸‹æ˜¯æ‚¨çš„æˆç»©ï¼š</p>
            </div>
            <div class="result-score">
                <div class="score-circle correct">
                    <div class="score-value" id="correct-count">0</div>
                    <div class="score-label">æ­£ç¡®é¢˜æ•°</div>
                </div>
                <div class="score-circle ielts">
                    <div class="score-value" id="ielts-score">0.0</div>
                    <div class="score-label">é›…æ€åˆ†æ•°</div>
                </div>
            </div>
            <div class="result-details">
                <h3>å„éƒ¨åˆ†å¾—åˆ†</h3>
                <div class="section-results" id="section-results"></div>
            </div>
            <button class="retry-btn" id="retry-btn">é‡æ–°æµ‹è¯•</button>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>å…³äºæˆ‘ä»¬</h4>
                <p>ä¸“æ³¨é›…æ€å¬åŠ›è¯„åˆ†è§£æï¼ŒåŠ©åŠ›è€ƒç”Ÿç§‘å­¦å¤‡è€ƒ</p>
            </div>
            <div class="footer-section">
                <h4>å¿«é€Ÿå¯¼èˆª</h4>
                <ul>
                    <li><a href="scoring.html">è¯„åˆ†è¯¦è§£</a></li>
                    <li><a href="cases.html">æ¡ˆä¾‹åˆ†æ</a></li>
                    <li><a href="practice.html">ç»ƒä¹ é¢˜</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 é›…æ€å¬åŠ›è¯„åˆ†è§£æ. All rights reserved.</p>
        </div>
    </footer>

    <link rel="stylesheet" 
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
          integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
          crossorigin="anonymous" 
          referrerpolicy="no-referrer">

    <script src="../js/secure-storage.js"></script>
    <script src="../js/sw-manager.js"></script>
    <script src="../js/mobile-audio-optimizer.js"></script>
    <script src="../js/mobile-touch-controls.js"></script>
    <script src="../js/mobile-gesture-audio.js"></script>
    <script src="../js/battery-performance-manager.js"></script>
    <script src="../js/mobile-performance-integration.js"></script>
    <script src="../js/network-speed-detector.js"></script>
    <script src="../js/enhanced-audio.js"></script>
    <script src="../js/progressive-audio-loader.js"></script>
    <script src="../js/modern-audio-manager.js"></script>
    <script src="../js/modern-audio-integration.js"></script>

    <script src="../js/test-data-6.js"></script>
    <script src="../å‰‘æ¡¥é›…æ€20/cambridge20_test3_answers.js"></script>

    <script src="../js/test-player.js"></script>
    <script src="../js/score-display.js"></script>
    <script src="../js/test-ui.js"></script>
    <script src="../js/keyboard-navigation.js"></script>
    <script src="../js/mobile-navigation.js"></script>
    <script src="../js/audio-lazy-loader.js"></script>
    <script src="../js/progress-manager.js"></script>
    <script src="../js/visual-feedback.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            try {
                if (typeof TEST_DATA_6 === 'undefined') {
                    throw new Error('TEST_DATA_6 æœªå®šä¹‰ï¼Œè¯·ç¡®ä¿ test-data-6.js å·²æ­£ç¡®åŠ è½½');
                }
                if (typeof cambridge20Test3Answers === 'undefined') {
                    throw new Error('cambridge20Test3Answers æœªå®šä¹‰ï¼Œè¯·ç¡®ä¿ cambridge20_test3_answers.js å·²æ­£ç¡®åŠ è½½');
                }
                if (typeof TestUI === 'undefined') {
                    throw new Error('TestUI ç±»æœªå®šä¹‰ï¼Œè¯·ç¡®ä¿ test-ui.js å·²æ­£ç¡®åŠ è½½');
                }

                window.TEST_DATA = TEST_DATA_6;
                window.standardAnswers = cambridge20Test3Answers;

                window.testUI = new TestUI();

                if (typeof AudioPlayer !== 'undefined') {
                    window.audioConfig = 'cambridge20-test3';
                }
            } catch (error) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: #fff; padding: 20px; border-radius: 5px; box-shadow: 0 0 10px rgba(0,0,0,0.1); z-index: 1000; text-align: center; border-left: 4px solid #e74c3c;';
                const h3 = document.createElement('h3');
                h3.style.cssText = 'color: #e74c3c; margin-bottom: 10px;';
                h3.textContent = 'åˆå§‹åŒ–å¤±è´¥';
                const p = document.createElement('p');
                p.style.cssText = 'margin-bottom: 15px; color: #666;';
                p.textContent = error.message;
                const button = document.createElement('button');
                button.style.cssText = 'padding: 8px 16px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;';
                button.textContent = 'åˆ·æ–°é¡µé¢';
                button.onclick = () => location.reload();
                errorDiv.appendChild(h3);
                errorDiv.appendChild(p);
                errorDiv.appendChild(button);
                document.body.appendChild(errorDiv);
            }
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰‘æ¡¥é›…æ€20 Test 3 å¬åŠ›æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .test-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .timer-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .timer {
            font-size: 2em;
            color: #e74c3c;
            font-weight: bold;
            margin: 10px 0;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
        }

        .btn-warning {
            background: #ed8936;
            color: white;
        }

        .btn-warning:hover {
            background: #dd6b20;
        }

        .section-container {
            background: white;
            border-radius: 15px;
            margin-bottom: 30px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .section-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px 30px;
            font-size: 1.3em;
            font-weight: 600;
        }

        .section-content {
            padding: 30px;
        }

        .question-group {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .question {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .question-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .options {
            margin-top: 10px;
        }

        .option {
            margin: 8px 0;
            display: flex;
            align-items: center;
        }

        .option input {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .option label {
            cursor: pointer;
            flex: 1;
            padding: 5px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .option label:hover {
            background-color: #e9ecef;
        }

        .fill-blank {
            display: inline-block;
            border-bottom: 2px solid #667eea;
            min-width: 100px;
            margin: 0 5px;
            padding: 5px;
            font-weight: bold;
        }

        .fill-blank input {
            border: none;
            outline: none;
            background: transparent;
            font-size: 1em;
            text-align: center;
            width: 100%;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .info-table th,
        .info-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .info-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }

        .completion-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .completion-text {
            line-height: 1.8;
            font-size: 1.1em;
        }

        .map-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        .map-image {
            max-width: 100%;
            border: 2px solid #667eea;
            border-radius: 10px;
            margin: 20px 0;
        }

        .map-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .map-option {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
            text-align: left;
        }

        .match-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }

        .match-questions {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .match-options {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }

        .match-item {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            background: white;
            border: 1px solid #e9ecef;
        }

        .select-input {
            width: 50px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
        }

        .submit-container {
            text-align: center;
            margin-top: 40px;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .submit-btn {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(72, 187, 120, 0.3);
        }

        .hidden {
            display: none;
        }

        .results {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .score-display {
            text-align: center;
            font-size: 2em;
            margin: 20px 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .test-info {
                grid-template-columns: 1fr;
            }

            .match-section {
                grid-template-columns: 1fr;
            }

            .map-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>å‰‘æ¡¥é›…æ€20 Test 3 å¬åŠ›æµ‹è¯•</h1>
            <p>Cambridge IELTS 20 Test 3 Listening</p>
            <div class="test-info">
                <div class="info-card">
                    <strong>æµ‹è¯•æ—¶é—´</strong><br>30åˆ†é’Ÿ + 10åˆ†é’ŸèªŠå†™
                </div>
                <div class="info-card">
                    <strong>é¢˜ç›®æ•°é‡</strong><br>40é¢˜
                </div>
                <div class="info-card">
                    <strong>æµ‹è¯•éƒ¨åˆ†</strong><br>4ä¸ªéƒ¨åˆ†
                </div>
                <div class="info-card">
                    <strong>éŸ³é¢‘æ’­æ”¾</strong><br>ä»…æ’­æ”¾ä¸€æ¬¡
                </div>
            </div>
        </div>

        <div class="timer-container">
            <div class="timer" id="timer">30:00</div>
            <div class="controls">
                <button class="btn btn-primary" onclick="startTest()">å¼€å§‹æµ‹è¯•</button>
                <button class="btn btn-warning" onclick="pauseTest()">æš‚åœ</button>
                <button class="btn btn-success" onclick="submitTest()">æäº¤ç­”æ¡ˆ</button>
            </div>
        </div>

        <!-- Audio Player -->
        <div class="timer-container">
            <h3>éŸ³é¢‘æ’­æ”¾å™¨</h3>
            <div id="audioPlayer">
                <audio id="currentAudio" controls style="width: 100%; margin: 10px 0;">
                    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
                </audio>
                <div class="audio-sections" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 15px;">
                    <button class="btn btn-primary" onclick="playSection(1)">Part 1 - å®¶å…·ç§Ÿèµå…¬å¸</button>
                    <button class="btn btn-primary" onclick="playSection(2)">Part 2 - è€ƒå¤æŒ–æ˜é¡¹ç›®</button>
                    <button class="btn btn-primary" onclick="playSection(3)">Part 3 - æˆå‰§èŠ‚ç›®ç ”ç©¶</button>
                    <button class="btn btn-primary" onclick="playSection(4)">Part 4 - åŒ…å®¹æ€§è®¾è®¡</button>
                </div>
            </div>
        </div>

        <!-- Section 1 -->
        <div class="section-container">
            <div class="section-header">
                Part 1 - å®¶å…·ç§Ÿèµå…¬å¸ (Questions 1-10)
            </div>
            <div class="section-content">
                <p><strong>è¯´æ˜ï¼š</strong>å®Œæˆä¸‹é¢çš„è¡¨æ ¼ã€‚æ¯ä¸ªç©ºæ ¼å†™ä¸€ä¸ªå•è¯å’Œ/æˆ–æ•°å­—ã€‚</p>
                
                <div class="table-container">
                    <table class="info-table">
                        <thead>
                            <tr>
                                <th>Name of company</th>
                                <th>Information about costs</th>
                                <th>Additional notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td rowspan="3">Peak Rentals</td>
                                <td>
                                    Prices range from $105 to $ <span class="fill-blank"><input type="text" name="q1" placeholder="1"></span><br>
                                    per room per month
                                </td>
                                <td>
                                    The furniture is very <span class="fill-blank"><input type="text" name="q2" placeholder="2"></span><br><br>
                                    Delivers in 1-2 days<br><br>
                                    Special offer:<br>
                                    free <span class="fill-blank"><input type="text" name="q3" placeholder="3"></span> with<br>
                                    every living room set
                                </td>
                            </tr>
                            <tr>
                                <td rowspan="2">
                                    <span class="fill-blank"><input type="text" name="q4" placeholder="4"></span> and Oliver<br><br>
                                    Mid-range prices<br><br>
                                    12% monthly fee for <span class="fill-blank"><input type="text" name="q5" placeholder="5"></span>
                                </td>
                                <td>
                                    Also offers a cleaning<br>
                                    service<br><br>
                                    Must have own <span class="fill-blank"><input type="text" name="q6" placeholder="6"></span><br><br>
                                    Minimum contract length:<br>
                                    six months
                                </td>
                            </tr>
                            <tr>
                                <td rowspan="2">
                                    <span class="fill-blank"><input type="text" name="q7" placeholder="7"></span> are allowed<br>
                                    within 7 days of delivery
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span class="fill-blank"><input type="text" name="q8" placeholder="8"></span> Rentals<br><br>
                                    Offers cheapest prices for renting<br>
                                    furniture and <span class="fill-blank"><input type="text" name="q9" placeholder="9"></span> items<br><br>
                                    See the <span class="fill-blank"><input type="text" name="q10" placeholder="10"></span> for the most<br>
                                    up-to-date prices
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Section 2 -->
        <div class="section-container">
            <div class="section-header">
                Part 2 - è€ƒå¤æŒ–æ˜é¡¹ç›® (Questions 11-20)
            </div>
            <div class="section-content">
                <div class="question-group">
                    <h3>Questions 11-16</h3>
                    <p><strong>é€‰æ‹©æ­£ç¡®ç­”æ¡ˆ Aã€B æˆ– C</strong></p>
                    
                    <div class="question">
                        <div class="question-title">11. Who was responsible for starting the community project?</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q11" value="A" id="q11a">
                                <label for="q11a">A. the castle owners</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q11" value="B" id="q11b">
                                <label for="q11b">B. a national charity</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q11" value="C" id="q11c">
                                <label for="q11c">C. the local council</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">12. How was the gold coin found?</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q12" value="A" id="q12a">
                                <label for="q12a">A. Heavy rain had removed some of the soil.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q12" value="B" id="q12b">
                                <label for="q12b">B. The ground was dug up by wild rabbits.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q12" value="C" id="q12c">
                                <label for="q12c">C. A person with a metal detector searched the area.</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">13. What led the archaeologists to believe there was an ancient village on this site?</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q13" value="A" id="q13a">
                                <label for="q13a">A. the lucky discovery of old records</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q13" value="B" id="q13b">
                                <label for="q13b">B. the bases of several structures visible in the grass</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q13" value="C" id="q13c">
                                <label for="q13c">C. the unusual stones found near the castle</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">14. What are the team still hoping to find?</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q14" value="A" id="q14a">
                                <label for="q14a">A. everyday pottery</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q14" value="B" id="q14b">
                                <label for="q14b">B. animal bones</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q14" value="C" id="q14c">
                                <label for="q14c">C. pieces of jewellery</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">15. What was found on the other side of the river to the castle?</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q15" value="A" id="q15a">
                                <label for="q15a">A. the remains of a large palace</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q15" value="B" id="q15b">
                                <label for="q15b">B. the outline of fields</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q15" value="C" id="q15c">
                                <label for="q15c">C. a number of small huts</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">16. What do the team plan to do after work ends this summer?</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q16" value="A" id="q16a">
                                <label for="q16a">A. prepare a display for a museum</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q16" value="B" id="q16b">
                                <label for="q16b">B. take part in a television programme</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q16" value="C" id="q16c">
                                <label for="q16c">C. start to organise school visits</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3>Questions 17-20</h3>
                    <p><strong>æ ‡è®°åœ°å›¾ã€‚å°†æ­£ç¡®å­—æ¯A-Gæ‹–åˆ°é¢˜ç›®17-20æ—è¾¹ã€‚</strong></p>
                    
                    <div class="map-container">
                        <h4>Bidcaster Archaeological Dig</h4>
                        <svg width="600" height="400" viewBox="0 0 600 400" style="border: 2px solid #667eea; border-radius: 10px; background: #f8f9fa;">
                            <!-- River -->
                            <path d="M50 50 Q300 80 550 60" stroke="#4ecdc4" stroke-width="20" fill="none"/>
                            <text x="500" y="45" font-size="12" fill="#333">River</text>
                            
                            <!-- Castle walls -->
                            <rect x="50" y="250" width="80" height="120" fill="none" stroke="#333" stroke-width="3"/>
                            <text x="55" y="275" font-size="10" fill="#333">Castle</text>
                            <text x="55" y="285" font-size="10" fill="#333">walls</text>
                            
                            <!-- Locations A-G -->
                            <circle cx="100" cy="150" r="15" fill="#ff6b6b"/>
                            <text x="95" y="155" font-size="14" fill="white" font-weight="bold">A</text>
                            
                            <rect x="200" y="90" width="30" height="20" fill="#667eea"/>
                            <text x="210" y="105" font-size="14" fill="white" font-weight="bold">B</text>
                            
                            <circle cx="350" cy="120" r="15" fill="#48bb78"/>
                            <text x="345" y="125" font-size="14" fill="white" font-weight="bold">C</text>
                            
                            <rect x="250" y="200" width="30" height="20" fill="#ed8936"/>
                            <text x="260" y="215" font-size="14" fill="white" font-weight="bold">D</text>
                            
                            <circle cx="450" cy="180" r="15" fill="#e53e3e"/>
                            <text x="445" y="185" font-size="14" fill="white" font-weight="bold">E</text>
                            
                            <rect x="70" y="350" width="30" height="20" fill="#805ad5"/>
                            <text x="80" y="365" font-size="14" fill="white" font-weight="bold">F</text>
                            
                            <rect x="200" y="280" width="30" height="20" fill="#38b2ac"/>
                            <text x="210" y="295" font-size="14" fill="white" font-weight="bold">G</text>
                            
                            <!-- Site of current dig -->
                            <rect x="200" y="240" width="80" height="30" fill="#ffd700" opacity="0.7"/>
                            <text x="205" y="250" font-size="10" fill="#333">Site of</text>
                            <text x="205" y="260" font-size="10" fill="#333">current dig</text>
                            
                            <!-- Information boards -->
                            <rect x="150" y="350" width="15" height="10" fill="#666"/>
                            <rect x="280" y="350" width="15" height="10" fill="#666"/>
                            <rect x="380" y="350" width="15" height="10" fill="#666"/>
                            
                            <!-- You are here -->
                            <circle cx="300" cy="380" r="8" fill="#000"/>
                            <text x="270" y="395" font-size="12" fill="#333">You are here</text>
                            
                            <!-- Compass -->
                            <g transform="translate(500, 320)">
                                <circle cx="0" cy="0" r="25" fill="white" stroke="#333"/>
                                <text x="-3" y="-15" font-size="10" fill="#333">N</text>
                                <text x="15" y="3" font-size="10" fill="#333">E</text>
                                <text x="-3" y="20" font-size="10" fill="#333">S</text>
                                <text x="-20" y="3" font-size="10" fill="#333">W</text>
                            </g>
                            
                            <!-- Trees -->
                            <circle cx="120" cy="200" r="8" fill="#48bb78"/>
                            <circle cx="400" cy="250" r="8" fill="#48bb78"/>
                            <circle cx="480" cy="280" r="8" fill="#48bb78"/>
                        </svg>
                        
                        <div class="map-options">
                            <div class="match-item">
                                <strong>17. bridge foundations</strong>
                                <select name="q17" class="select-input">
                                    <option value="">é€‰æ‹©</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                    <option value="G">G</option>
                                </select>
                            </div>
                            <div class="match-item">
                                <strong>18. rubbish pit</strong>
                                <select name="q18" class="select-input">
                                    <option value="">é€‰æ‹©</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                    <option value="G">G</option>
                                </select>
                            </div>
                            <div class="match-item">
                                <strong>19. meeting hall</strong>
                                <select name="q19" class="select-input">
                                    <option value="">é€‰æ‹©</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                    <option value="G">G</option>
                                </select>
                            </div>
                            <div class="match-item">
                                <strong>20. fish pond</strong>
                                <select name="q20" class="select-input">
                                    <option value="">é€‰æ‹©</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                    <option value="G">G</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 3 -->
        <div class="section-container">
            <div class="section-header">
                Part 3 - æˆå‰§èŠ‚ç›®ç ”ç©¶ (Questions 21-30)
            </div>
            <div class="section-content">
                <div class="question-group">
                    <h3>Questions 21-26</h3>
                    <p><strong>é€‰æ‹©æ­£ç¡®ç­”æ¡ˆ Aã€B æˆ– C</strong></p>
                    
                    <div class="question">
                        <div class="question-title">21. Finn was pleased to discover that their topic</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q21" value="A" id="q21a">
                                <label for="q21a">A. was not familiar to their module leader.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q21" value="B" id="q21b">
                                <label for="q21b">B. had not been chosen by other students.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q21" value="C" id="q21c">
                                <label for="q21c">C. did not prove to be difficult to research.</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">22. Maya says a mistaken belief about theatre programmes is that</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q22" value="A" id="q22a">
                                <label for="q22a">A. theatres pay companies to produce them.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q22" value="B" id="q22b">
                                <label for="q22b">B. few theatre-goers buy them nowadays.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q22" value="C" id="q22c">
                                <label for="q22c">C. they contain far more adverts than previously.</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">23. Finn was surprised that, in early British theatre, programmes</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q23" value="A" id="q23a">
                                <label for="q23a">A. were difficult for audiences to obtain.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q23" value="B" id="q23b">
                                <label for="q23b">B. were given out free of charge.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q23" value="C" id="q23c">
                                <label for="q23c">C. were seen as a kind of contract.</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">24. Maya feels their project should include an explanation of why companies of actors</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q24" value="A" id="q24a">
                                <label for="q24a">A. promoted their own plays.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q24" value="B" id="q24b">
                                <label for="q24b">B. performed plays outdoors.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q24" value="C" id="q24c">
                                <label for="q24c">C. had to tour with their plays.</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">25. Finn and Maya both think that, compared to nineteenth-century programmes, those from the eighteenth century</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q25" value="A" id="q25a">
                                <label for="q25a">A. were more original.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q25" value="B" id="q25b">
                                <label for="q25b">B. were more colourful.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q25" value="C" id="q25c">
                                <label for="q25c">C. were more informative.</label>
                            </div>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-title">26. Maya doesn't fully understand why, in the twentieth century,</div>
                        <div class="options">
                            <div class="option">
                                <input type="radio" name="q26" value="A" id="q26a">
                                <label for="q26a">A. very few theatre programmes were printed in the USA.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q26" value="B" id="q26b">
                                <label for="q26b">B. British theatre programmes failed to develop for so long.</label>
                            </div>
                            <div class="option">
                                <input type="radio" name="q26" value="C" id="q26c">
                                <label for="q26c">C. theatre programmes in Britain copied fashions from the USA.</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="question-group">
                    <h3>Questions 27-30</h3>
                    <p><strong>å…³äºèŠ‚ç›®çš„è¯„ä»·æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
                    <p><strong>ä»æ–¹æ¡†ä¸­é€‰æ‹©å››ä¸ªç­”æ¡ˆå¹¶å°†æ­£ç¡®å­—æ¯A-Få†™åœ¨é¢˜ç›®27-30æ—è¾¹ã€‚</strong></p>
                    
                    <div class="match-section">
                        <div class="match-questions">
                            <h4>Show</h4>
                            <div class="match-item">
                                <strong>27. Ruy Blas</strong>
                                <select name="q27" class="select-input">
                                    <option value="">é€‰æ‹©</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                </select>
                            </div>
                            <div class="match-item">
                                <strong>28. Man of La Mancha</strong>
                                <select name="q28" class="select-input">
                                    <option value="">é€‰æ‹©</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                </select>
                            </div>
                            <div class="match-item">
                                <strong>29. The Tragedy of Jane Shore</strong>
                                <select name="q29" class="select-input">
                                    <option value="">é€‰æ‹©</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                </select>
                            </div>
                            <div class="match-item">
                                <strong>30. The Sailors' Festival</strong>
                                <select name="q30" class="select-input">
                                    <option value="">é€‰æ‹©</option>
                                    <option value="A">A</option>
                                    <option value="B">B</option>
                                    <option value="C">C</option>
                                    <option value="D">D</option>
                                    <option value="E">E</option>
                                    <option value="F">F</option>
                                </select>
                            </div>
                        </div>
                        <div class="match-options">
                            <p><strong>Comments about programme</strong></p>
                            <div class="match-item">A. Its origin is somewhat controversial.</div>
                            <div class="match-item">B. It is historically significant for a country.</div>
                            <div class="match-item">C. It was effective at attracting audiences.</div>
                            <div class="match-item">D. It is included in a recent project.</div>
                            <div class="match-item">E. It contains insights into the show.</div>
                            <div class="match-item">F. It resembles an artwork.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 4 -->
        <div class="section-container">
            <div class="section-header">
                Part 4 - åŒ…å®¹æ€§è®¾è®¡ (Questions 31-40)
            </div>
            <div class="section-content">
                <p><strong>è¯´æ˜ï¼š</strong>å®Œæˆä¸‹é¢çš„ç¬”è®°ã€‚æ¯ä¸ªç©ºæ ¼åªå†™ä¸€ä¸ªå•è¯ã€‚</p>
                
                <div class="completion-section">
                    <h3 style="text-align: center; margin-bottom: 20px;">Inclusive design</h3>
                    
                    <div class="completion-text">
                        <h4>Definition</h4>
                        <p>- Designing products that can be accessed by a diverse range of people without the need for any <span class="fill-blank"><input type="text" name="q31" placeholder="31"></span></p>
                        
                        <p>- Not the same as universal design: that is design for everyone, including catering for people with <span class="fill-blank"><input type="text" name="q32" placeholder="32"></span> problems.</p>
                        
                        <h4>Examples of inclusive design</h4>
                        <p>â€¢ <span class="fill-blank"><input type="text" name="q33" placeholder="33"></span> which are adjustable, avoiding back or neck problems</p>
                        
                        <p>â€¢ <span class="fill-blank"><input type="text" name="q34" placeholder="34"></span> in public toilets which are easier to use</p>
                        
                        <p><strong>To assist the elderly:</strong></p>
                        <p>- designers avoid using <span class="fill-blank"><input type="text" name="q35" placeholder="35"></span> in interfaces</p>
                        
                        <p>- people can make commands using a mouse, keyboard or their <span class="fill-blank"><input type="text" name="q36" placeholder="36"></span></p>
                        
                        <h4>Impact of non-inclusive designs</h4>
                        <p><strong>Access</strong></p>
                        <p>- Loss of independence for disabled people.</p>
                        
                        <p><strong>Safety</strong></p>
                        <p>- Seatbelts are especially problematic for <span class="fill-blank"><input type="text" name="q37" placeholder="37"></span> women.</p>
                        
                        <p>- PPE jackets are often unsuitable because of the size of women's <span class="fill-blank"><input type="text" name="q38" placeholder="38"></span></p>
                        
                        <p>- PPE for female <span class="fill-blank"><input type="text" name="q39" placeholder="39"></span> officers dealing with emergencies is the worst.</p>
                        
                        <p><strong>Comfort in the workplace</strong></p>
                        <p>- The <span class="fill-blank"><input type="text" name="q40" placeholder="40"></span> in offices is often too low for women.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="submit-container">
            <button class="submit-btn" onclick="submitTest()">æäº¤æµ‹è¯•</button>
        </div>

        <div id="results" class="results hidden">
            <h2>æµ‹è¯•ç»“æœ</h2>
            <div class="score-display" id="scoreDisplay">
                <!-- ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
            <div id="detailedResults">
                <!-- è¯¦ç»†ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
        </div>
    </div>

    <script>
        let testTimer;
        let timeLeft = 30 * 60; // 30 minutes in seconds
        let testStarted = false;

        // Audio configuration for Test 3
        const audioSections = {
            1: '../å‰‘æ¡¥é›…æ€20/å‰‘20 å¬åŠ›éŸ³é¢‘Test3/Section1.mp3',
            2: '../å‰‘æ¡¥é›…æ€20/å‰‘20 å¬åŠ›éŸ³é¢‘Test3/Section2.mp3',
            3: '../å‰‘æ¡¥é›…æ€20/å‰‘20 å¬åŠ›éŸ³é¢‘Test3/Section3.mp3',
            4: '../å‰‘æ¡¥é›…æ€20/å‰‘20 å¬åŠ›éŸ³é¢‘Test3/Section4.mp3'
        };

        function playSection(sectionNumber) {
            const audio = document.getElementById('currentAudio');
            const audioPath = audioSections[sectionNumber];
            
            if (audioPath) {
                audio.src = audioPath;
                audio.load();
                audio.play().catch(error => {
                    console.error('Audio playback failed:', error);
                    console.warn('éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥éŸ³é¢‘æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚');
                });
            }
        }

        // æ­£ç¡®ç­”æ¡ˆ - åŸºäºå›¾ç‰‡ä¸­çš„ç­”æ¡ˆ
        const correctAnswers = {
            'q1': '239',
            'q2': 'modern',
            'q3': 'lamp',
            'q4': 'Aaron',
            'q5': 'damage',
            'q6': 'insurance',
            'q7': 'exchanges',
            'q8': 'SpaceSpace',
            'q9': 'electronic',
            'q10': 'app',
            'q11': 'B',
            'q12': 'A',
            'q13': 'A',
            'q14': 'C',
            'q15': 'B',
            'q16': 'C',
            'q17': 'B',
            'q18': 'A',
            'q19': 'G',
            'q20': 'E',
            'q21': 'B',
            'q22': 'A',
            'q23': 'C',
            'q24': 'A',
            'q25': 'C',
            'q26': 'B',
            'q27': 'F',
            'q28': 'E',
            'q29': 'B',
            'q30': 'D',
            'q31': 'adaptation',
            'q32': 'cognitive',
            'q33': 'desks',
            'q34': 'taps',
            'q35': 'blue',
            'q36': 'voice',
            'q37': 'pregnant',
            'q38': 'shoulders',
            'q39': 'police',
            'q40': 'temperature'
        };

        function startTest() {
            if (!testStarted) {
                testStarted = true;
                testTimer = setInterval(updateTimer, 1000);
                console.log('Test started');
            }
        }

        function pauseTest() {
            if (testTimer) {
                clearInterval(testTimer);
                testTimer = null;
                console.log('Test paused');
            } else if (testStarted) {
                testTimer = setInterval(updateTimer, 1000);
                console.log('Test resumed');
            }
        }

        function updateTimer() {
            if (timeLeft <= 0) {
                clearInterval(testTimer);
                submitTest();
                return;
            }

            timeLeft--;
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function submitTest() {
            clearInterval(testTimer);
            
            let score = 0;
            let totalQuestions = 40;
            let results = [];

            // æ£€æŸ¥æ‰€æœ‰ç­”æ¡ˆ
            for (let [question, correctAnswer] of Object.entries(correctAnswers)) {
                let userAnswer = getUserAnswer(question);
                let isCorrect = false;

                if (Array.isArray(correctAnswer)) {
                    // å¤šé€‰é¢˜
                    isCorrect = arraysEqual(userAnswer.sort(), correctAnswer.sort());
                } else {
                    // å•é€‰é¢˜æˆ–å¡«ç©ºé¢˜
                    isCorrect = userAnswer.toLowerCase().trim() === correctAnswer.toLowerCase();
                }

                if (isCorrect) score++;
                
                results.push({
                    question: question,
                    userAnswer: userAnswer,
                    correctAnswer: correctAnswer,
                    isCorrect: isCorrect
                });
            }

            // è®¡ç®—IELTSåˆ†æ•°
            const ieltsScore = calculateIELTSScore(score, totalQuestions);
            
            // æ˜¾ç¤ºç»“æœ
            displayResults(score, totalQuestions, ieltsScore, results);
        }

        function getUserAnswer(questionName) {
            if (questionName.includes('_')) {
                // å¤šé€‰é¢˜
                const checkboxes = document.querySelectorAll(`input[name="${questionName}"]:checked`);
                return Array.from(checkboxes).map(cb => cb.value);
            } else {
                // å•é€‰é¢˜æˆ–å¡«ç©ºé¢˜æˆ–ä¸‹æ‹‰é€‰æ‹©
                const element = document.querySelector(`input[name="${questionName}"]:checked`) || 
                               document.querySelector(`input[name="${questionName}"]`) ||
                               document.querySelector(`select[name="${questionName}"]`);
                return element ? element.value : '';
            }
        }

        function arraysEqual(a, b) {
            return Array.isArray(a) && Array.isArray(b) && 
                   a.length === b.length && a.every((val, i) => val === b[i]);
        }

        function calculateIELTSScore(score, total) {
            const percentage = score / total;
            if (percentage >= 0.9) return 9;
            if (percentage >= 0.825) return 8.5;
            if (percentage >= 0.75) return 8;
            if (percentage >= 0.675) return 7.5;
            if (percentage >= 0.6) return 7;
            if (percentage >= 0.525) return 6.5;
            if (percentage >= 0.45) return 6;
            if (percentage >= 0.375) return 5.5;
            if (percentage >= 0.3) return 5;
            if (percentage >= 0.225) return 4.5;
            if (percentage >= 0.15) return 4;
            if (percentage >= 0.075) return 3.5;
            return 3;
        }

        function displayResults(score, total, ieltsScore, results) {
            document.getElementById('results').classList.remove('hidden');
            
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.innerHTML = `
                <div>æ­£ç¡®ç­”æ¡ˆ: ${score}/${total}</div>
                <div>IELTSåˆ†æ•°: ${ieltsScore}</div>
                <div>æ­£ç¡®ç‡: ${(score/total*100).toFixed(1)}%</div>
            `;

            const detailedResults = document.getElementById('detailedResults');
            let detailsHTML = '<h3>è¯¦ç»†ç»“æœ</h3>';
            
            results.forEach((result, index) => {
                const status = result.isCorrect ? 'âœ“' : 'âœ—';
                const statusClass = result.isCorrect ? 'correct' : 'incorrect';
                detailsHTML += `
                    <div style="margin: 10px 0; padding: 10px; border-left: 4px solid ${result.isCorrect ? '#48bb78' : '#e74c3c'}; background: #f8f9fa;">
                        <strong>${status} ç¬¬${index + 1}é¢˜</strong><br>
                        ä½ çš„ç­”æ¡ˆ: ${Array.isArray(result.userAnswer) ? result.userAnswer.join(', ') : result.userAnswer}<br>
                        æ­£ç¡®ç­”æ¡ˆ: ${Array.isArray(result.correctAnswer) ? result.correctAnswer.join(', ') : result.correctAnswer}
                    </div>
                `;
            });
            
            detailedResults.innerHTML = detailsHTML;
            
            // æ»šåŠ¨åˆ°ç»“æœ
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }

        // é˜²æ­¢é¡µé¢åˆ·æ–°æ—¶ä¸¢å¤±ç­”æ¡ˆ
        window.addEventListener('beforeunload', function(e) {
            if (testStarted && timeLeft > 0) {
                e.preventDefault();
                e.returnValue = 'æµ‹è¯•æ­£åœ¨è¿›è¡Œä¸­ï¼Œç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ';
            }
        });
    </script>
</body>
</html>